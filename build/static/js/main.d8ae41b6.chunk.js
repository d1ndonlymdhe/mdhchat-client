(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(34),o=n.n(s),r=(n(41),n(36)),j=n(2),u=(n(42),n(35)),i=n.n(u),a=n(0),b="https://mdhchat.herokuapp.com",l=i()(b);function m(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),r=Object(j.a)(o,2),u=r[0],i=r[1],b=Object(c.useState)(!1),m=Object(j.a)(b,2),f=m[0],x=m[1],h=Object(c.useState)(!1),g=Object(j.a)(h,2),p=g[0],S=g[1],R=Object(c.useState)([]),k=Object(j.a)(R,2),y=k[0],w=k[1],N=Object(c.useState)(!1),U=Object(j.a)(N,2),J=U[0],I=U[1],L=Object(c.useState)(!1),D=Object(j.a)(L,2),F=D[0];D[1];return Object(c.useEffect)((function(){l.on("roomCreated",(function(e,t){x(!1),S(!0),i(t)})),l.on("roomJoined",(function(e,t){console.log("joined"),x(!0),S(!1),i(t)})),l.on("newUser",(function(e){var t=e.username,n=y;n.push(t),w(n)})),l.on("error",(function(e){return console.log(e)}))}),[l]),f||p?Object(a.jsxs)("div",{id:"chat",children:[!F||Object(a.jsx)("showUsers",{}),Object(a.jsx)(C,{}),Object(a.jsx)(v,{socket:l,username:n,roomCode:u,setRoomCode:i})]}):J?Object(a.jsx)(O,{username:n,setRoomJoined:x,setRoomCode:i}):Object(a.jsx)(d,{username:n,setUsername:s,roomCode:u,setRoomCode:i,setRoomJoined:x,setLoggedIn:I})}function d(e){e.setRoomJoined,e.setRoomCode;var t=e.setLoggedIn,n=e.setUsername,s=(e.username,Object(c.useState)(!1)),o=Object(j.a)(s,2),r=o[0],u=o[1],i=Object(c.useState)(!1),b=Object(j.a)(i,2),l=b[0],m=b[1],d=Object(c.useRef)(null);return Object(a.jsxs)("div",{id:"mainContainer",children:[!r||Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===d.current&&u(!1)},ref:d,children:Object(a.jsx)(x,{setLoggedIn:t,setUserName:n})}),!l||Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===d.current&&m(!1)},ref:d,children:Object(a.jsx)(h,{setSignUp:m,setLogin:u})}),Object(a.jsx)(C,{}),Object(a.jsxs)("div",{id:"buttons",children:[Object(a.jsx)("button",{onClick:function(){u(!0),m(!1)},children:"LOGIN"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){m(!0),u(!1)},children:"SIGN UP"})]})]})}function O(e){var t=e.username,n=(e.setRoomJoined,e.setRoomCode),s=Object(c.useState)(!1),o=Object(j.a)(s,2),r=o[0],u=o[1];return Object(a.jsxs)("div",{id:"mainContainer",children:[!r||Object(a.jsx)(f,{setJoin:u,setRoomCode:n,joinRoom:function(e){console.log(t,e),l.emit("join",t,e.toString())}}),Object(a.jsx)(C,{}),Object(a.jsxs)("div",{id:"buttons",children:[Object(a.jsx)("button",{onClick:function(){u(!0)},children:"Join Room"}),Object(a.jsx)("button",{onClick:function(){l.emit("create",t)},children:"Create Room"})]})]})}function f(e){var t=e.setJoin,n=e.setRoomCode,s=e.joinRoom,o=Object(c.useState)(""),r=Object(j.a)(o,2),u=r[0],i=r[1],b=Object(c.useRef)(null);return Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===b.current&&t(!1)},ref:b,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Room Code"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(!1),n(u),s(u)},children:[Object(a.jsx)("input",{type:"text",name:"roomCode",value:u,onChange:function(e){(function(e){if(e.length>4)return!0;for(var t=e.split(""),n=0;n<e.length;n++)if(!["0","1","2","3","4","5","6","7","8","9"].includes(t[n]))return!0;return!1})(e.target.value)||i(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]})]})})}function x(e){var t=e.setLoggedIn,n=e.setUserName,s=Object(c.useRef)(null),o=Object(c.useRef)(null);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"LOGIN"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=s.current.value,r=o.current.value;fetch("".concat(b,"/login?u=").concat(c,"&p=").concat(r)).then((function(e){return e.json()})).then((function(e){"ok"===e.status&&(n(c),t(!0))}))},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",ref:s}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",ref:o}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"submit"})]})]})}function h(e){var t=e.setSignUp,n=e.setLogin,s=Object(c.useRef)(null),o=Object(c.useRef)(null);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Signup"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=s.current.value,r=o.current.value;fetch("".concat(b,"/signup?u=").concat(c,"&p=").concat(r)).then((function(e){return e.json()})).then((function(e){"ok"===e.status&&(n(!0),t(!1))}))},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",ref:s}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",ref:o}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"submit"})]})]})}function v(e){var t=e.socket,n=e.roomCode,s=e.username,o="room code = ".concat(n);console.log(n);var u=Object(c.useState)([{from:s,msg:"".concat(o)}]),i=Object(j.a)(u,2),b=i[0],l=i[1],m=Object(c.useState)(""),d=Object(j.a)(m,2),O=d[0],f=d[1];Object(c.useEffect)((function(){t.on("msg",(function(e){var t=e.username,n=e.msg;console.log("recieved",t,n);var c=b;c.push({from:t,msg:n}),l(Object(r.a)(c)),console.log(b)}))}),[t]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g,{messages:b,username:s}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==O&&(console.log("sent",s,O),t.emit("msg",n,O,s)),f("")},children:[Object(a.jsx)(p,{msg:O,setMsg:f}),Object(a.jsx)("button",{className:"btn",style:{width:"clamp(0px, 100%, 100%)"},type:"submit",children:"Send"})]})]})}function g(e){var t=e.messages,n=e.username;return Object(a.jsx)("div",{id:"messages",children:t.map((function(e,t){var c="";return c=e.from===n?"You":e.from,console.log(e.msg),Object(a.jsx)("div",{className:"msg",children:"".concat(c,": ").concat(e.msg)},t)}))})}function p(e){var t=e.msg,n=e.setMsg;return Object(a.jsx)("div",{children:Object(a.jsx)("input",{className:"input",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Message"})})}function C(){return Object(a.jsx)("div",{class:"title",children:"MDHCHT"})}o.a.render(Object(a.jsx)(m,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.d8ae41b6.chunk.js.map