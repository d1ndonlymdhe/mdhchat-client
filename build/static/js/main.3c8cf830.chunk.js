(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(34),s=n.n(o),r=(n(41),n(36)),i=n(2),u=(n(42),n(35)),j=n.n(u),a=n(0),b="https://mdhchat.herokuapp.com",l=j()(b);function m(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),u=r[0],j=r[1],b=Object(c.useState)(!1),m=Object(i.a)(b,2),O=m[0],f=m[1];return Object(c.useEffect)((function(){l.on("roomCreated",(function(e,t){f(!1),j(t)})),l.on("roomJoined",(function(e,t){console.log("joined"),f(!0),j(t)})),l.on("error",(function(e){return console.log(e)}))}),[l]),O?Object(a.jsxs)("div",{id:"chat",children:[Object(a.jsx)(C,{}),Object(a.jsx)(v,{socket:l,username:n,roomCode:u,setRoomCode:j})]}):Object(a.jsx)(d,{username:n,setUsername:o,roomCode:u,setRoomCode:j,setRoomJoined:f})}function d(e){var t=e.setRoomJoined,n=e.setRoomCode,o=e.setUsername,s=e.username,r=Object(c.useState)(!1),u=Object(i.a)(r,2),j=u[0],b=u[1],l=Object(c.useState)(!1),m=Object(i.a)(l,2),d=m[0],f=m[1],v=Object(c.useState)(!1),p=Object(i.a)(v,2),g=p[0],R=p[1],S=Object(c.useRef)(null);return g?Object(a.jsx)(O,{username:s,setRoomJoined:t,setRoomCode:n}):Object(a.jsxs)("div",{id:"mainContainer",children:[!j||Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===S.current&&b(!1)},ref:S,children:Object(a.jsx)(x,{setLoggedIn:R,setUserName:o})}),!d||Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===S.current&&f(!1)},ref:S,children:Object(a.jsx)(h,{setSignUp:f,setLogin:b})}),Object(a.jsx)(C,{}),Object(a.jsxs)("div",{id:"buttons",children:[Object(a.jsx)("button",{onClick:function(){b(!0),f(!1)},children:"LOGIN"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){f(!0),b(!1)},children:"SIGN UP"})]})]})}function O(e){var t=e.username,n=(e.setRoomJoined,e.setRoomCode),o=Object(c.useState)(!1),s=Object(i.a)(o,2),r=s[0],u=s[1];Object(c.useEffect)((function(){l.on("roomCreated",(function(e,t){j(t)}))}));var j=function(e){console.log(t,e),l.emit("join",t,e.toString())};return Object(a.jsxs)("div",{id:"mainContainer",children:[!r||Object(a.jsx)(f,{setJoin:u,setRoomCode:n,joinRoom:j}),Object(a.jsx)(C,{}),Object(a.jsxs)("div",{id:"buttons",children:[Object(a.jsx)("button",{onClick:function(){u(!0)},children:"Join Room"}),Object(a.jsx)("button",{onClick:function(){l.emit("create",t)},children:"Create Room"})]})]})}function f(e){var t=e.setJoin,n=e.setRoomCode,o=e.joinRoom,s=Object(c.useState)(""),r=Object(i.a)(s,2),u=r[0],j=r[1],b=Object(c.useRef)(null);return Object(a.jsx)("div",{className:"overlay",onClick:function(e){e.target===b.current&&t(!1)},ref:b,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Room Code"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(!1),n(u),o(u)},children:[Object(a.jsx)("input",{type:"text",name:"roomCode",value:u,onChange:function(e){(function(e){if(e.length>4)return!0;for(var t=e.split(""),n=0;n<e.length;n++)if(!["0","1","2","3","4","5","6","7","8","9"].includes(t[n]))return!0;return!1})(e.target.value)||j(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Submit"})]})]})})}function x(e){var t=e.setLoggedIn,n=e.setUserName,o=Object(c.useRef)(null),s=Object(c.useRef)(null);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"LOGIN"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=o.current.value,r=s.current.value;fetch("".concat(b,"/login?u=").concat(c,"&p=").concat(r)).then((function(e){return e.json()})).then((function(e){"ok"===e.status&&(n(c),t(!0))}))},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",ref:o}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",ref:s}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"submit"})]})]})}function h(e){var t=e.setSignUp,n=e.setLogin,o=Object(c.useRef)(null),s=Object(c.useRef)(null);return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:"Signup"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=o.current.value,r=s.current.value;fetch("".concat(b,"/signup?u=").concat(c,"&p=").concat(r)).then((function(e){return e.json()})).then((function(e){"ok"===e.status&&(n(!0),t(!1))}))},children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",ref:o}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",ref:s}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"submit"})]})]})}function v(e){var t=e.socket,n=e.roomCode,o=e.username,s="room code = ".concat(n);console.log(n);var u=Object(c.useState)([{from:o,msg:"".concat(s)}]),j=Object(i.a)(u,2),b=j[0],l=j[1],m=Object(c.useState)(""),d=Object(i.a)(m,2),O=d[0],f=d[1];Object(c.useEffect)((function(){t.on("msg",(function(e){var t=e.username,n=e.msg;console.log("recieved",t,n);var c=b;c.push({from:t,msg:n}),l(Object(r.a)(c)),console.log(b)}))}),[t,b]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(p,{messages:b,username:o}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==O&&(console.log("sent",o,O),t.emit("msg",n,O,o)),f("")},children:[Object(a.jsx)(g,{msg:O,setMsg:f}),Object(a.jsx)("button",{className:"btn",style:{width:"clamp(0px, 100%, 100%)"},type:"submit",children:"Send"})]})]})}function p(e){var t=e.messages,n=e.username;return Object(a.jsx)("div",{id:"messages",children:t.map((function(e,t){var c="";return c=e.from===n?"You":e.from,console.log(e.msg),Object(a.jsx)("div",{className:"msg",children:"".concat(c,": ").concat(e.msg)},t)}))})}function g(e){var t=e.msg,n=e.setMsg;return Object(a.jsx)("div",{children:Object(a.jsx)("input",{className:"input",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Message"})})}function C(){return Object(a.jsx)("div",{class:"title",children:"MDHCHT"})}s.a.render(Object(a.jsx)(m,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.3c8cf830.chunk.js.map